# BrewSource MCP Server Development Environment
# Automatically loaded by direnv when entering the project directory

# Use Nix shell if available, otherwise use system tools
if has nix; then
  use nix
fi

# Set up environment variables
export PROJECT_NAME="brewsource-mcp"
export KIND_CLUSTER_NAME="brewsource-dev"
export NAMESPACE="brewsource-dev"
export KUBE_CONTEXT="kind-brewsource-dev"
export KUBECONFIG="${PWD}/.kube/config"
export TILT_HOST="0.0.0.0"

# Add local bin to PATH for project-specific tools
export PATH="${PWD}/bin:${PATH}"

# Application environment
export DATABASE_URL="postgres://brewsource_user:brewsource_pass@localhost:5432/brewsource_dev?sslmode=disable"
export REDIS_URL="redis://localhost:6379/0"
export LOG_LEVEL="debug"
export PORT="8080"

# Helpful aliases
alias k="kubectl -n ${NAMESPACE}"
alias kl="kubectl logs -n ${NAMESPACE}"
alias kd="kubectl describe -n ${NAMESPACE}"
alias kg="kubectl get -n ${NAMESPACE}"

# Tilt aliases
alias up="tilt up"
alias down="tilt down"

# Database connection helpers
alias psql-dev="psql '${DATABASE_URL}'"
alias redis-cli-dev="redis-cli -h localhost -p 6379"

echo "üç∫ BrewSource MCP development environment loaded!"
echo "üí° Use 'make help' to see available commands"
